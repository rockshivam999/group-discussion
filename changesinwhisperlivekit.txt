diff --git a/Dockerfile.cpu b/Dockerfile.cpu
index 5101fae..5bfdb67 100644
--- a/Dockerfile.cpu
+++ b/Dockerfile.cpu
@@ -1,4 +1,4 @@
-FROM python:3.13-slim
+FROM python:3.11-slim
 
 ENV DEBIAN_FRONTEND=noninteractive
 ENV PYTHONUNBUFFERED=1
@@ -14,22 +14,25 @@ RUN apt-get update && \
         ffmpeg \
         git \
         build-essential \
-        python3-dev && \
+        python3-dev \
+        libsndfile1 \
+        libportaudio2 && \
     rm -rf /var/lib/apt/lists/*
 
-# Install CPU-only PyTorch
-RUN pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cpu
+# Install CPU-only PyTorch and diarization deps
+RUN pip install --no-cache-dir \
+    torch==2.1.1 \
+    torchaudio==2.1.1 \
+    torchvision==0.16.1 \
+    diart==0.9.2 \
+    huggingface_hub==0.16.4 \
+    --extra-index-url https://download.pytorch.org/whl/cpu
 
 COPY . .
+COPY hf_token_temp /tmp/hf_token_temp
 
-# Install WhisperLiveKit directly, allowing for optional dependencies
-RUN if [ -n "$EXTRAS" ]; then \
-      echo "Installing with extras: [$EXTRAS]"; \
-      pip install --no-cache-dir whisperlivekit[$EXTRAS]; \
-    else \
-      echo "Installing base package only"; \
-      pip install --no-cache-dir whisperlivekit; \
-    fi
+# Install WhisperLiveKit from local source with diarization extras
+RUN pip install --no-cache-dir ".[diarization]" "huggingface_hub<0.27.0"
 
 # Enable in-container caching for Hugging Face models
 VOLUME ["/root/.cache/huggingface/hub"]
@@ -44,18 +47,14 @@ RUN if [ -n "$HF_PRECACHE_DIR" ]; then \
     fi
 
 # Conditionally copy a Hugging Face token if provided
-RUN if [ -n "$HF_TKN_FILE" ]; then \
-      echo "Copying Hugging Face token from $HF_TKN_FILE"; \
+RUN if [ -f "/tmp/hf_token_temp" ]; then \
+      echo "Copying token..."; \
       mkdir -p /root/.cache/huggingface && \
-      cp $HF_TKN_FILE /root/.cache/huggingface/token; \
-    else \
-      echo "No Hugging Face token file specified, skipping token setup"; \
+      cp /tmp/hf_token_temp /root/.cache/huggingface/token; \
     fi
-    
 # Expose port for the transcription server
 EXPOSE 8000
 
-ENTRYPOINT ["whisperlivekit-server", "--host", "0.0.0.0"]
+ENTRYPOINT ["whisperlivekit-server","--host", "0.0.0.0","--diarization","--diarization-backend", "diart"]
 
-# Default args - you might want to use a smaller model for CPU
-CMD ["--model", "tiny"]
\ No newline at end of file
+CMD ["--model", "base"]
diff --git a/whisperlivekit/core.py b/whisperlivekit/core.py
index 978329b..59b4752 100644
--- a/whisperlivekit/core.py
+++ b/whisperlivekit/core.py
@@ -150,7 +150,7 @@ class TranscriptionEngine:
                 diart_params = update_with_kwargs(diart_params, kwargs)
                 self.diarization_model = DiartDiarization(
                     block_duration=self.args.min_chunk_size,
-                    **diart_params
+                    # **diart_params
                 )
             elif self.args.diarization_backend == "sortformer":
                 from whisperlivekit.diarization.sortformer_backend import \
